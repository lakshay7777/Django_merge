{% extends 'blog/base.html' %}

{% block content %}
<div style="margin-bottom: 0px;">
  <article class="post">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"></script>
    <aside class="actions">
      <br>
      {% if request.user.is_authenticated %}
      <a class="btn btn-secondary" href="{% url 'post_edit' slug=post.slug %}">
        {% include './icon/pencil-fill.svg' %}
      </a>
      {% else %}
      {% endif %}
    </aside>
    <h1>
      <img style="width: 45px;border-radius: 0%;"
        src="{% if post.thumnail_image %}{{ post.thumnail_image.url }}{% endif %}" class="card-img-top" alt="...">
      &nbsp; {{ post.title }}
    </h1>
    <div style="width: 100%; margin-top: 20px;">
      <img style="width: 100%; height: 250px; margin-bottom: 20px;"
        src="{% if post.feature_image %}{{ post.feature_image.url }}{% endif %}" class="card-img-top" alt="...">
    </div>
    <div>
      <p style="font-size: large;">
        <b>Category:-</b>&nbsp;&nbsp; {{ post.category }}

        <span style="margin-left: 65%;">
          {% if post.published_date %}
          <time class="date">{{ post.published_date }}</time>
          {% endif %}
        </span>
      </p>
    </div>
    <p>{{ post.text|linebreaksbr }}</p>
    <p><strong>Author:-</strong>
      {{ post.author }}
    </p><br>
    <p><strong>Tags:-</strong>
      {% for tag in post.tag.all %}
      {{ tag }} |
      {% endfor %}
    </p><br>
    
      <div class="dropdown">
        <button style="background-color: rgb(238, 80, 6);" class="btn btn-secondary dropdown-toggle" type="button"
          data-bs-toggle="dropdown" aria-expanded="false">
          Comments
        </button>
        <div class="dropdown-menu">
          <div style="width: 400px; height: 500px; padding: 40px;">
            <h2>Comments </h2>
            <form action="" method="post">
              {% csrf_token %}
              <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" name="name" value="" class="form-control" id="usr">
              </div>
              <div class="form-group">
                <label for="email">Email:</label>
                <input type="text" name="email" value="" class="form-control" id="usr">
              </div>
              <div class="form-group">
                <label for="txt">Text:</label>
                <input type="text" name="text" value="" class="form-control" id="txt">
              </div>
              <button type="submit" class="btn btn-primary">Submit</button>
            </form>
          </div>
        </div>
      </div>

      {% if not comment %}
      no comments yet....
      {% else %}
      {% for comment in comment %}
      <br>
      <div style="width: 35%;">
        <p>
        <p style="background-color: aqua; border-radius: 10px; padding: 7px;">
          {{ comment.text }}
        </p>
        {% for reply in comment.replies.all %}
        <p style="background-color: aquamarine;border-radius: 10px; padding: 7px;margin-left: 50%;">
          Reply==>{{ reply.text }}
        </p>
        {% endfor %}
        </p>

        <div class="dropdown" style="display: flex; justify-content: end;">
          <button style="background-color:rgb(238, 80, 6) ;" class="btn btn-secondary dropdown-toggle" type="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            Reply
          </button>
          <div class="dropdown-menu">
            <div style="width: 400px; height: 500px; padding: 40px;">
              <h2>reply </h2>
              <form action="" method="post">
                {% csrf_token %}
                <!-- <div class="form-group">
                <label for="name">text</label>
                <input type="text" name="reply" value="" class="form-control" id="usr">
                <input type="text" name="comment" value="{{comment}}" hidden>
              </div> -->
                <div>
                  <input type="hidden" name="comment" value="{{ comment.id }}">
                  <input type="text" name="reply" required oninvalid="setCustomValidity('Plese enter your reply.')" />
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}

      {% endif %}
    

  </article>
</div>


{% endblock %}



<!-- -->